DATABASE_URL=postgresql://kalshi@127.0.0.1:55432/kalshi
SERVICE_GUARDRAILS=1
SERVICE_ENV_GUARDRAILS=warn
# SERVICE_ENV_ALLOW_PREFIXES=DATABASE_URL_
# SERVICE_ENV_ALLOW_KEYS=AZURE_OPENAI_API_KEY
DB_INIT_SCHEMA=0
LOG_LEVEL=INFO
LOG_DIR=/var/log/kalshi_ingestor
LOG_STDOUT=1

WEB_PORTAL_HOST=0.0.0.0
WEB_PORTAL_PORT=8123
WEB_PORTAL_THREADS=4
WEB_DB_POOL_MIN=4
WEB_DB_POOL_MAX=32
WEB_DB_POOL_TIMEOUT=10
# Log queries slower than this threshold in milliseconds (0 disables).
WEB_PORTAL_DB_SLOW_QUERY_MS=250
WEB_PORTAL_PASSWORD=<portal-password>
WEB_PORTAL_SECRET_KEY=<portal-secret>
WEB_PORTAL_TRUST_PROXY=0
# WEB_PORTAL_COOKIE_SECURE=1
# WEB_PORTAL_COOKIE_SAMESITE=None
# WEB_PORTAL_COOKIE_HTTPONLY=1
# WEB_PORTAL_COOKIE_DOMAIN=
# WEB_PORTAL_COOKIE_PATH=/
# WEB_PORTAL_COOKIE_NAME=session
WEB_PORTAL_DATA_CACHE_SEC=60
WEB_PORTAL_EVENT_DETAIL_CACHE_SEC=60
WEB_PORTAL_MARKET_DETAIL_CACHE_SEC=60
WEB_PORTAL_STATIC_CACHE_MAX_AGE_SEC=3600
WEB_PORTAL_DB_SNAPSHOT_ENABLE=0
WEB_PORTAL_DB_SNAPSHOT_REFRESH_SEC=60
WEB_PORTAL_DB_SNAPSHOT_REFRESH_ON_QUEUE=0
# Cache static assets for 1 hour (0 disables).
WEB_PORTAL_STATIC_CACHE_MAX_AGE_SEC=3600

# Backfill control for the portal (default disabled).
WEB_PORTAL_BACKFILL_MODE=disabled

# Opportunities defaults.
WEB_PORTAL_OPPORTUNITY_LIMIT=200
WEB_PORTAL_OPPORTUNITY_MIN_GAP=0.10
WEB_PORTAL_OPPORTUNITY_MIN_CONF=0.55
WEB_PORTAL_OPPORTUNITY_MAX_AGE_MINUTES=360
WEB_PORTAL_OPPORTUNITY_MAX_TICK_AGE_MINUTES=60
WEB_PORTAL_OPPORTUNITY_SCAN_LIMIT=2000

# Health staleness thresholds (seconds).
WEB_PORTAL_DISCOVERY_STALE_SECONDS=3600
WEB_PORTAL_BACKFILL_STALE_SECONDS=1800
WEB_PORTAL_WS_STALE_SECONDS=120
WEB_PORTAL_RAG_STALE_SECONDS=300

# Snapshot throttling for event detail pages.
WEB_PORTAL_EVENT_SNAPSHOT_LIMIT=3
WEB_PORTAL_MARKET_METADATA_FETCH=0
